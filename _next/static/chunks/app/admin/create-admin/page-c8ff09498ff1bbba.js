(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8793],{4126:(e,r,s)=>{"use strict";s.d(r,{AdminProvider:()=>c,P:()=>m,z:()=>d});var t=s(5155),a=s(2115),n=s(5695),l=s(6104),i=s(283),u=s(9599);let o=(0,a.createContext)({isAdmin:!1,adminLoading:!0,adminUser:null}),d=()=>(0,a.useContext)(o),c=e=>{let{children:r}=e,{currentUser:s,loading:d,userRole:c}=(0,i.A)(),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!0),[f,b]=(0,a.useState)(null);return(0,n.useRouter)(),(0,a.useEffect)(()=>{(async()=>{if(!d){if(!s){h(!1),b(null),x(!1);return}try{let e=(0,u.Mu)(c);e||(e=await (0,l._x)(s.uid)),h(e),b(e?s:null)}catch(e){console.error("Error checking admin status:",e),h(!1),b(null)}finally{x(!1)}}})()},[s,d,c]),(0,t.jsx)(o.Provider,{value:{isAdmin:m,adminLoading:g,adminUser:f},children:r})},m=e=>function(r){let{isAdmin:s,adminLoading:l}=d(),i=(0,n.useRouter)();return((0,a.useEffect)(()=>{l||s||i.push("/admin/login")},[s,l,i]),l)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Checking admin credentials..."}),(0,t.jsx)("p",{className:"text-gray-400",children:"Please wait while we verify your access."})]})}):s?(0,t.jsx)(e,{...r}):null}},5695:(e,r,s)=>{"use strict";var t=s(8999);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},7590:(e,r,s)=>{Promise.resolve().then(s.bind(s,9727))},9599:(e,r,s)=>{"use strict";s.d(r,{Mu:()=>n,cb:()=>l});let t={viewer:0,guest:0,user:1,editor:2,moderator:3,admin:4,superadmin:5},a=(e,r)=>(t.hasOwnProperty(e)||(e="guest"),t.hasOwnProperty(r)||(r="guest"),t[e]>=t[r]),n=e=>a(e,"admin"),l=e=>({viewer:"Người xem",guest:"Kh\xe1ch",user:"Người d\xf9ng đ\xe3 đăng k\xfd",editor:"Bi\xean tập vi\xean",moderator:"Quản trị vi\xean nội dung",admin:"Quản trị vi\xean",superadmin:"Quản trị vi\xean cấp cao"})[e]||e},9727:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>i});var t=s(5155),a=s(2115),n=s(5695),l=s(6104);let i=(0,s(4126).P)(function(){let[e,r]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[u,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1);(0,n.useRouter)();let f=async t=>{t.preventDefault(),c(null),h(null),x(!0);try{if(!e||!s||!u)throw Error("Please fill in all fields");if(s!==u)throw Error("Passwords do not match");if(s.length<6)throw Error("Password must be at least 6 characters long");if(!await (0,l.nW)(e,s))throw Error("Failed to create admin user");h("Admin user ".concat(e," created successfully")),r(""),i(""),o("")}catch(e){console.error("Create admin error:",e),c(e.message||"Failed to create admin user. Please try again.")}finally{x(!1)}};return(0,t.jsxs)("div",{className:"container mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create Admin User"}),d&&(0,t.jsx)("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 text-red-300 px-4 py-3 rounded mb-4",children:(0,t.jsx)("p",{children:d})}),m&&(0,t.jsx)("div",{className:"bg-green-500 bg-opacity-20 border border-green-500 text-green-300 px-4 py-3 rounded mb-4",children:(0,t.jsx)("p",{children:m})}),(0,t.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg max-w-md",children:(0,t.jsxs)("form",{onSubmit:f,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-gray-300 text-sm font-medium mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"admin@example.com",required:!0})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-300 text-sm font-medium mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",value:s,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••",required:!0})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-gray-300 text-sm font-medium mb-2",children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",value:u,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g?"opacity-70 cursor-not-allowed":""),children:g?"Creating...":"Create Admin User"})]})})]})})}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,9507,7158,883,283,8441,1684,7358],()=>r(7590)),_N_E=e.O()}]);