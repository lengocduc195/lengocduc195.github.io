(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3388],{255:(e,t,s)=>{"use strict";function a(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return a}}),s(5155),s(7650),s(5744),s(589)},2146:(e,t,s)=>{"use strict";function a(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),s(5262)},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return i}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class a{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return r?new r:new a}function n(e){return r?r.bind(e):a.bind(e)}function i(){return r?r.snapshot():function(e,...t){return e(...t)}}},4126:(e,t,s)=>{"use strict";s.d(t,{AdminProvider:()=>h,P:()=>g,z:()=>d});var a=s(5155),r=s(2115),l=s(5695),n=s(6104),i=s(283),c=s(9599);let o=(0,r.createContext)({isAdmin:!1,adminLoading:!0,adminUser:null}),d=()=>(0,r.useContext)(o),h=e=>{let{children:t}=e,{currentUser:s,loading:d,userRole:h}=(0,i.A)(),[g,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!0),[p,b]=(0,r.useState)(null);return(0,l.useRouter)(),(0,r.useEffect)(()=>{(async()=>{if(!d){if(!s){x(!1),b(null),m(!1);return}try{let e=(0,c.Mu)(h);e||(e=await (0,n._x)(s.uid)),x(e),b(e?s:null)}catch(e){console.error("Error checking admin status:",e),x(!1),b(null)}finally{m(!1)}}})()},[s,d,h]),(0,a.jsx)(o.Provider,{value:{isAdmin:g,adminLoading:u,adminUser:p},children:t})},g=e=>function(t){let{isAdmin:s,adminLoading:n}=d(),i=(0,l.useRouter)();return((0,r.useEffect)(()=>{n||s||i.push("/admin/login")},[s,n,i]),n)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Checking admin credentials..."}),(0,a.jsx)("p",{className:"text-gray-400",children:"Please wait while we verify your access."})]})}):s?(0,a.jsx)(e,{...t}):null}},5028:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(6645),r=s.n(a)},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},5744:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return a.workAsyncStorageInstance}});let a=s(7828)},6645:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(8229)._(s(7357));function r(e,t){var s;let r={};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,a.default)({...l,modules:null==(s=l.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7294:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(5155),r=s(2115),l=s(283),n=s(6104),i=s(1115),c=s(4126),o=s(6874),d=s.n(o);let h=(0,s(5028).default)(()=>Promise.all([s.e(7776),s.e(8699)]).then(s.bind(s,8699)),{loadableGenerated:{webpack:()=>[8699]},ssr:!1}),g=e=>{let{referrers:t,totalVisitors:s,itemsPerPage:l=10}=e,[n,i]=(0,r.useState)(1),c=Object.entries(t).map(e=>{let[t,s]=e;return{referrer:t,count:s}}).sort((e,t)=>t.count-e.count),o=Math.ceil(c.length/l),d=n*l,h=c.slice(d-l,d),g=e=>i(e);return 0===c.length?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Nguồn"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Lượt truy cập"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Phần trăm"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"py-4 text-center text-gray-400",children:"Kh\xf4ng c\xf3 dữ liệu nguồn truy cập"})})})]})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Nguồn"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Lượt truy cập"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Phần trăm"})]})}),(0,a.jsx)("tbody",{children:h.map((e,t)=>{let{referrer:r,count:l}=e;return(0,a.jsxs)("tr",{className:t%2==0?"bg-gray-750":"",children:[(0,a.jsx)("td",{className:"py-2 px-4",children:r}),(0,a.jsx)("td",{className:"py-2 px-4 text-right",children:l}),(0,a.jsxs)("td",{className:"py-2 px-4 text-right",children:[(l/s*100).toFixed(1),"%"]})]},r)})})]})}),o>1&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("nav",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>g(Math.max(1,n-1)),disabled:1===n,className:"px-3 py-1 rounded-l-md ".concat(1===n?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600"),children:"\xab"}),(0,a.jsx)("div",{className:"flex",children:Array.from({length:o},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>g(e),className:"px-3 py-1 ".concat(n===e?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"),children:e},e))}),(0,a.jsx)("button",{onClick:()=>g(Math.min(o,n+1)),disabled:n===o,className:"px-3 py-1 rounded-r-md ".concat(n===o?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600"),children:"\xbb"})]})})]})},x=e=>{let{countries:t,totalVisitors:s,itemsPerPage:l=10}=e,[n,i]=(0,r.useState)(1),c=Object.entries(t).map(e=>{let[t,s]=e;return{country:t,count:s}}).sort((e,t)=>t.count-e.count),o=Math.ceil(c.length/l),d=n*l,h=c.slice(d-l,d),g=e=>i(e);return 0===c.length?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Quốc gia"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Lượt truy cập"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Phần trăm"})]})}),(0,a.jsx)("tbody",{children:(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"py-4 text-center text-gray-400",children:"Kh\xf4ng c\xf3 dữ liệu vị tr\xed"})})})]})}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Quốc gia"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Lượt truy cập"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Phần trăm"})]})}),(0,a.jsx)("tbody",{children:h.map((e,t)=>{let{country:r,count:l}=e;return(0,a.jsxs)("tr",{className:t%2==0?"bg-gray-750":"",children:[(0,a.jsx)("td",{className:"py-2 px-4",children:r}),(0,a.jsx)("td",{className:"py-2 px-4 text-right",children:l}),(0,a.jsxs)("td",{className:"py-2 px-4 text-right",children:[(l/s*100).toFixed(1),"%"]})]},r)})})]})}),o>1&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("nav",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>g(Math.max(1,n-1)),disabled:1===n,className:"px-3 py-1 rounded-l-md ".concat(1===n?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600"),children:"\xab"}),(0,a.jsx)("div",{className:"flex",children:Array.from({length:o},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>g(e),className:"px-3 py-1 ".concat(n===e?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"),children:e},e))}),(0,a.jsx)("button",{onClick:()=>g(Math.min(o,n+1)),disabled:n===o,className:"px-3 py-1 rounded-r-md ".concat(n===o?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600"),children:"\xbb"})]})})]})},u=e=>{let{pages:t,totalPageViews:s,itemsPerPage:l=10}=e,[n,i]=(0,r.useState)(1),c=Math.ceil(t.length/l),o=n*l,d=t.slice(o-l,o),h=e=>i(e);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"overflow-y-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Trang"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Lượt xem"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Phần trăm"})]})}),(0,a.jsx)("tbody",{children:d.map((e,t)=>(0,a.jsxs)("tr",{className:t%2==0?"bg-gray-750":"",children:[(0,a.jsx)("td",{className:"py-2 px-4 truncate max-w-md",children:e.page}),(0,a.jsx)("td",{className:"py-2 px-4 text-right",children:e.views}),(0,a.jsxs)("td",{className:"py-2 px-4 text-right",children:[(e.views/s*100).toFixed(1),"%"]})]},e.page))})]})}),c>1&&(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("nav",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>h(Math.max(1,n-1)),disabled:1===n,className:"px-3 py-1 rounded-l-md ".concat(1===n?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600"),children:"\xab"}),(0,a.jsx)("div",{className:"flex",children:Array.from({length:c},(e,t)=>t+1).map(e=>(0,a.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 ".concat(n===e?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"),children:e},e))}),(0,a.jsx)("button",{onClick:()=>h(Math.min(c,n+1)),disabled:n===c,className:"px-3 py-1 rounded-r-md ".concat(n===c?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 hover:bg-gray-600"),children:"\xbb"})]})})]})},m=(0,c.P)(function(){let{currentUser:e}=(0,l.A)(),[t,s]=(0,r.useState)({totalVisitors:0,uniqueVisitors:0,registeredUsers:0,anonymousVisitors:0,totalPageViews:0,averagePageViewsPerVisitor:0,topPages:[],averageTimeOnSite:0,averageTimePerPage:0,bounceRate:0,deviceTypes:{},browsers:{},operatingSystems:{},countries:{},regions:{},cities:{},totalInteractions:0,interactionsByType:{},visitorsByHour:Array(24).fill(0),visitorsByDay:Array(7).fill(0),visitorsByMonth:Array(12).fill(0),referrers:{},isLoading:!0}),[c,o]=(0,r.useState)("last30days"),[m,p]=(0,r.useState)(new Date(Date.now()-2592e6).toISOString().split("T")[0]),[b,y]=(0,r.useState)(new Date().toISOString().split("T")[0]),[f,j]=(0,r.useState)(!0),[N,v]=(0,r.useState)(null),w=()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());switch(c){case"today":return{startDate:t,endDate:e};case"yesterday":let s=new Date(t);return s.setDate(s.getDate()-1),{startDate:s,endDate:t};case"last7days":let a=new Date(t);return a.setDate(a.getDate()-7),{startDate:a,endDate:e};case"last30days":let r=new Date(t);return r.setDate(r.getDate()-30),{startDate:r,endDate:e};case"thisMonth":return{startDate:new Date(t.getFullYear(),t.getMonth(),1),endDate:e};case"lastMonth":return{startDate:new Date(t.getFullYear(),t.getMonth()-1,1),endDate:new Date(t.getFullYear(),t.getMonth(),0)};case"custom":return{startDate:new Date(m),endDate:new Date(b+"T23:59:59")};default:return{startDate:new Date(Date.now()-2592e6),endDate:e}}};(0,r.useEffect)(()=>{(async()=>{if(!n.v$){v("Firebase Realtime Database is not initialized"),j(!1);return}try{j(!0);let{startDate:e,endDate:t}=w(),a=e.getTime(),r=t.getTime(),l=(0,i.KR)(n.v$,"analytics/visitors"),c=(0,i.P)(l,(0,i.kT)("timestamp"),(0,i.EO)(a),(0,i.FD)(r)),o=await (0,i.Jt)(c),d=(0,i.KR)(n.v$,"analytics/pageViews"),h=(0,i.P)(d,(0,i.kT)("timestamp"),(0,i.EO)(a),(0,i.FD)(r)),g=await (0,i.Jt)(h),x=(0,i.KR)(n.v$,"analytics/timeSpent"),u=(0,i.P)(x,(0,i.kT)("timestamp"),(0,i.EO)(a),(0,i.FD)(r)),m=await (0,i.Jt)(u),p=(0,i.KR)(n.v$,"analytics/interactions"),b=(0,i.P)(p,(0,i.kT)("timestamp"),(0,i.EO)(a),(0,i.FD)(r)),y=await (0,i.Jt)(b),f=[],N=new Set,v=new Set,P={},T={},D={},S={},k={},O={},L={},M={},_={},C=Array(24).fill(0),I=Array(7).fill(0),A=Array(12).fill(0),E=0,F=0,V=0,R=0;if(o.exists()&&o.forEach(e=>{let t=e.val();if(!t.page||!t.page.startsWith("/admin")){var s,a,r,l,n,i;if(f.push(t),t.sessionId&&N.add(t.sessionId),t.userId&&v.add(t.userId),(null==(s=t.browserInfo)?void 0:s.deviceType)&&(T[t.browserInfo.deviceType]=(T[t.browserInfo.deviceType]||0)+1),(null==(a=t.browserInfo)?void 0:a.browser)&&(D[t.browserInfo.browser]=(D[t.browserInfo.browser]||0)+1),(null==(r=t.browserInfo)?void 0:r.os)&&(S[t.browserInfo.os]=(S[t.browserInfo.os]||0)+1),(null==(l=t.location)?void 0:l.country)&&(k[t.location.country]=(k[t.location.country]||0)+1),(null==(n=t.location)?void 0:n.region)&&(O[t.location.region]=(O[t.location.region]||0)+1),(null==(i=t.location)?void 0:i.city)&&(L[t.location.city]=(L[t.location.city]||0)+1),t.referrer&&!t.referrer.includes(window.location.hostname))try{let e=new URL(t.referrer).hostname;_[e]=(_[e]||0)+1}catch(e){}if(t.timestamp){let e=new Date(t.timestamp);C[e.getHours()]++,I[e.getDay()]++,A[e.getMonth()]++}}}),g.exists()&&g.forEach(e=>{let t=e.val();t.page&&(P[t.page]=(P[t.page]||0)+1,F++)}),m.exists()){let e={};m.forEach(t=>{let s=t.val();s.timeSpent&&(E+=s.timeSpent),s.sessionId&&s.page&&(!e[s.sessionId]&&(e[s.sessionId]=0,V++),e[s.sessionId]++)}),Object.values(e).forEach(e=>{1===e&&R++})}let B=0;y.exists()&&y.forEach(e=>{let t=e.val();t.type&&(M[t.type]=(M[t.type]||0)+1,B++)});let K=Object.entries(P).map(e=>{let[t,s]=e;return{page:t,views:s}}).sort((e,t)=>t.views-e.views).slice(0,10),U=N.size,z=new Set;f.forEach(e=>{e.isAuthenticated&&e.sessionId&&z.add(e.sessionId)});let Q=z.size,H=U-Q,$=U>0?F/U:0,q=U>0?E/U:0,J=F>0?E/F:0,Y=V>0?R/V*100:0;s({totalVisitors:U,uniqueVisitors:U,registeredUsers:Q,anonymousVisitors:H,totalPageViews:F,averagePageViewsPerVisitor:$,topPages:K,averageTimeOnSite:q,averageTimePerPage:J,bounceRate:Y,deviceTypes:T,browsers:D,operatingSystems:S,countries:k,regions:O,cities:L,totalInteractions:B,interactionsByType:M,visitorsByHour:C,visitorsByDay:I,visitorsByMonth:A,referrers:_,isLoading:!1}),j(!1)}catch(e){console.error("Error fetching statistics data:",e),v(e.message||"Failed to load statistics data"),j(!1)}})()},[c,m,b]);let P=e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,"m ").concat(s,"s")};return f?(0,a.jsxs)("div",{className:"container mx-auto p-6 pt-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Thống k\xea chi tiết"}),(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:(0,a.jsx)("p",{className:"text-center",children:"Đang tải dữ liệu thống k\xea..."})})]}):N?(0,a.jsxs)("div",{className:"container mx-auto p-6 pt-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Thống k\xea chi tiết"}),(0,a.jsx)("div",{className:"bg-red-900 rounded-lg p-6 shadow-lg",children:(0,a.jsxs)("p",{className:"text-center",children:["Lỗi: ",N]})})]}):(0,a.jsxs)("div",{className:"container mx-auto p-6 pt-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Thống k\xea chi tiết"}),(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsx)("label",{className:"font-medium",children:"Khoảng thời gian:"}),(0,a.jsxs)("select",{value:c,onChange:e=>o(e.target.value),className:"bg-gray-700 text-white rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"today",children:"H\xf4m nay"}),(0,a.jsx)("option",{value:"yesterday",children:"H\xf4m qua"}),(0,a.jsx)("option",{value:"last7days",children:"7 ng\xe0y qua"}),(0,a.jsx)("option",{value:"last30days",children:"30 ng\xe0y qua"}),(0,a.jsx)("option",{value:"thisMonth",children:"Th\xe1ng n\xe0y"}),(0,a.jsx)("option",{value:"lastMonth",children:"Th\xe1ng trước"}),(0,a.jsx)("option",{value:"custom",children:"T\xf9y chỉnh"})]}),"custom"===c&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),className:"bg-gray-700 text-white rounded px-3 py-2"}),(0,a.jsx)("span",{children:"đến"}),(0,a.jsx)("input",{type:"date",value:b,onChange:e=>y(e.target.value),className:"bg-gray-700 text-white rounded px-3 py-2"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Lượt xem trang"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:t.totalPageViews.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Tổng số lượt xem trang"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Người d\xf9ng đ\xe3 đăng k\xfd"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:t.registeredUsers.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Người d\xf9ng đ\xe3 đăng nhập"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Tỷ lệ tho\xe1t"}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:[t.bounceRate.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Tỷ lệ người d\xf9ng chỉ xem 1 trang"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Ph\xe2n loại người d\xf9ng"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.registeredUsers.toLocaleString()}),(0,a.jsx)("p",{className:"text-gray-400",children:"Người d\xf9ng đ\xe3 đăng nhập"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.anonymousVisitors.toLocaleString()}),(0,a.jsx)("p",{className:"text-gray-400",children:"Kh\xe1ch kh\xf4ng đăng nhập"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:t.averagePageViewsPerVisitor.toFixed(1)}),(0,a.jsx)("p",{className:"text-gray-400",children:"Trang/phi\xean truy cập"})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(h,{options:{labels:["Người d\xf9ng đ\xe3 đăng k\xfd","Kh\xe1ch kh\xf4ng đăng k\xfd"],colors:["#4ade80","#60a5fa"],legend:{position:"bottom",labels:{colors:"#fff"}},dataLabels:{enabled:!0,formatter:function(e){return e.toFixed(1)+"%"}},plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Tổng",color:"#fff"}}}}}},series:[t.registeredUsers,t.anonymousVisitors],type:"donut",height:300})})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Thống k\xea thời gian"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:P(t.averageTimeOnSite)}),(0,a.jsx)("p",{className:"text-gray-400",children:"Thời gian trung b\xecnh tr\xean trang web"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:P(t.averageTimePerPage)}),(0,a.jsx)("p",{className:"text-gray-400",children:"Thời gian trung b\xecnh tr\xean mỗi trang"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[t.bounceRate.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-gray-400",children:"Tỷ lệ tho\xe1t"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Lượt truy cập theo giờ"}),(0,a.jsx)(h,{options:{chart:{type:"bar",background:"transparent",toolbar:{show:!1}},xaxis:{categories:Array.from({length:24},(e,t)=>"".concat(t,"h")),labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"}}},grid:{borderColor:"#374151"},colors:["#60a5fa"]},series:[{name:"Lượt truy cập",data:t.visitorsByHour}],type:"bar",height:300})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Lượt truy cập theo ng\xe0y trong tuần"}),(0,a.jsx)(h,{options:{chart:{type:"bar",background:"transparent",toolbar:{show:!1}},xaxis:{categories:["CN","T2","T3","T4","T5","T6","T7"],labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"}}},grid:{borderColor:"#374151"},colors:["#4ade80"]},series:[{name:"Lượt truy cập",data:t.visitorsByDay}],type:"bar",height:300})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Loại thiết bị"}),Object.keys(t.deviceTypes).length>0&&(0,a.jsx)(h,{options:{labels:Object.keys(t.deviceTypes).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),colors:["#4ade80","#60a5fa","#f472b6"],legend:{position:"bottom",labels:{colors:"#fff"}},dataLabels:{enabled:!0,formatter:function(e){return e.toFixed(1)+"%"}}},series:Object.values(t.deviceTypes),type:"pie",height:300})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Tr\xecnh duyệt"}),Object.keys(t.browsers).length>0&&(0,a.jsx)(h,{options:{chart:{type:"bar",background:"transparent",toolbar:{show:!1}},xaxis:{categories:Object.keys(t.browsers),labels:{style:{colors:"#fff"}}},yaxis:{labels:{style:{colors:"#fff"}}},grid:{borderColor:"#374151"},colors:["#f472b6"]},series:[{name:"Lượt truy cập",data:Object.values(t.browsers)}],type:"bar",height:300})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Thống k\xea vị tr\xed"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Timezones"}),(0,a.jsx)(x,{countries:t.countries,totalVisitors:t.totalVisitors})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Thống k\xea c\xe1c trang"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Tổng lượt xem trang"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:t.totalPageViews.toLocaleString()}),(0,a.jsx)("h3",{className:"text-lg font-medium mt-6 mb-2",children:"C\xe1c trang được xem nhiều nhất"}),(0,a.jsx)(u,{pages:t.topPages,totalPageViews:t.totalPageViews})]}),(0,a.jsx)("div",{children:(0,a.jsx)(h,{options:{labels:t.topPages.slice(0,7).map(e=>{let t=e.page;return t.length>20?t.substring(0,17)+"...":t}),legend:{position:"bottom",labels:{colors:"#fff"}},dataLabels:{enabled:!0,formatter:function(e){return e.toFixed(1)+"%"}},colors:["#4ade80","#60a5fa","#f472b6","#fbbf24","#a78bfa","#34d399","#fb7185"]},series:t.topPages.slice(0,7).map(e=>e.views),type:"pie",height:350})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Thống k\xea tương t\xe1c"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Tổng số tương t\xe1c"}),(0,a.jsx)("p",{className:"text-3xl font-bold",children:t.totalInteractions.toLocaleString()}),(0,a.jsx)("h3",{className:"text-lg font-medium mt-6 mb-2",children:"Tương t\xe1c theo loại"}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-80",children:(0,a.jsxs)("table",{className:"min-w-full bg-gray-700 rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left",children:"Loại tương t\xe1c"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Số lượng"}),(0,a.jsx)("th",{className:"py-2 px-4 text-right",children:"Phần trăm"})]})}),(0,a.jsx)("tbody",{children:Object.entries(t.interactionsByType).sort((e,t)=>t[1]-e[1]).map((e,s)=>{let[r,l]=e;return(0,a.jsxs)("tr",{className:s%2==0?"bg-gray-750":"",children:[(0,a.jsx)("td",{className:"py-2 px-4",children:r}),(0,a.jsx)("td",{className:"py-2 px-4 text-right",children:l}),(0,a.jsxs)("td",{className:"py-2 px-4 text-right",children:[(l/t.totalInteractions*100).toFixed(1),"%"]})]},r)})})]})})]}),Object.keys(t.interactionsByType).length>0&&(0,a.jsx)("div",{children:(0,a.jsx)(h,{options:{labels:Object.keys(t.interactionsByType).map(e=>e.replace("_"," ").charAt(0).toUpperCase()+e.replace("_"," ").slice(1)),legend:{position:"bottom",labels:{colors:"#fff"}},dataLabels:{enabled:!0,formatter:function(e){return e.toFixed(1)+"%"}},colors:["#4ade80","#60a5fa","#f472b6","#fbbf24","#a78bfa","#34d399","#fb7185"]},series:Object.values(t.interactionsByType),type:"pie",height:350})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg mb-8",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Nguồn truy cập"}),(0,a.jsx)(g,{referrers:t.referrers,totalVisitors:t.totalVisitors})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,a.jsx)(d(),{href:"/admin/dashboard",className:"text-blue-500 hover:underline",children:"← Quay lại Dashboard"}),(0,a.jsx)(d(),{href:"/admin/analytics",className:"text-blue-500 hover:underline",children:"Xem ph\xe2n t\xedch chi tiết →"})]})]})})},7357:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let a=s(5155),r=s(2115),l=s(2146);function n(e){return{default:e&&"default"in e?e.default:e}}s(255);let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},c=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(n)),c=t.loading;function o(e){let n=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,o=i?r.Suspense:r.Fragment,d=t.ssr?(0,a.jsxs)(a.Fragment,{children:[null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(o,{...i?{fallback:n}:{},children:d})}return o.displayName="LoadableComponent",o}},7828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return a}});let a=(0,s(4054).createAsyncLocalStorage)()},9356:(e,t,s)=>{Promise.resolve().then(s.bind(s,7294))},9599:(e,t,s)=>{"use strict";s.d(t,{Mu:()=>l,cb:()=>n});let a={viewer:0,guest:0,user:1,editor:2,moderator:3,admin:4,superadmin:5},r=(e,t)=>(a.hasOwnProperty(e)||(e="guest"),a.hasOwnProperty(t)||(t="guest"),a[e]>=a[t]),l=e=>r(e,"admin"),n=e=>({viewer:"Người xem",guest:"Kh\xe1ch",user:"Người d\xf9ng đ\xe3 đăng k\xfd",editor:"Bi\xean tập vi\xean",moderator:"Quản trị vi\xean nội dung",admin:"Quản trị vi\xean",superadmin:"Quản trị vi\xean cấp cao"})[e]||e}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9507,7158,6874,883,283,8441,1684,7358],()=>t(9356)),_N_E=e.O()}]);