(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{4126:(e,r,s)=>{"use strict";s.d(r,{AdminProvider:()=>c,P:()=>m,z:()=>o});var t=s(5155),a=s(2115),n=s(5695),i=s(6104),l=s(283),u=s(9599);let d=(0,a.createContext)({isAdmin:!1,adminLoading:!0,adminUser:null}),o=()=>(0,a.useContext)(d),c=e=>{let{children:r}=e,{currentUser:s,loading:o,userRole:c}=(0,l.A)(),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!0),[f,b]=(0,a.useState)(null);return(0,n.useRouter)(),(0,a.useEffect)(()=>{(async()=>{if(!o){if(!s){h(!1),b(null),x(!1);return}try{let e=(0,u.Mu)(c);e||(e=await (0,i._x)(s.uid)),h(e),b(e?s:null)}catch(e){console.error("Error checking admin status:",e),h(!1),b(null)}finally{x(!1)}}})()},[s,o,c]),(0,t.jsx)(d.Provider,{value:{isAdmin:m,adminLoading:g,adminUser:f},children:r})},m=e=>function(r){let{isAdmin:s,adminLoading:i}=o(),l=(0,n.useRouter)();return((0,a.useEffect)(()=>{i||s||l.push("/admin/login")},[s,i,l]),i)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Checking admin credentials..."}),(0,t.jsx)("p",{className:"text-gray-400",children:"Please wait while we verify your access."})]})}):s?(0,t.jsx)(e,{...r}):null}},5430:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(5155),a=s(2115),n=s(5695),i=s(6104),l=s(283),u=s(4126);function d(){let[e,r]=(0,a.useState)(""),[s,d]=(0,a.useState)(""),[o,c]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),g=(0,n.useRouter)(),{currentUser:x}=(0,l.A)(),{isAdmin:f,adminLoading:b}=(0,u.z)();(0,a.useEffect)(()=>{!b&&f&&g.push("/admin/dashboard")},[f,b,g]);let p=async r=>{r.preventDefault(),c(null),h(!0);try{if(!e||!s)throw Error("Please enter both email and password");let r=await (0,i.Lx)(e,s);if(!await (0,i._x)(r.uid))throw Error("You do not have admin privileges");g.push("/admin/dashboard")}catch(e){console.error("Admin login error:",e),c(e.message||"Failed to login. Please try again.")}finally{h(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-gray-800 rounded-lg shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Login"}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Please enter your credentials to access the admin area"})]}),o&&(0,t.jsx)("div",{className:"bg-red-500 bg-opacity-20 border border-red-500 text-red-300 px-4 py-3 rounded mb-4",children:(0,t.jsx)("p",{children:o})}),(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-gray-300 text-sm font-medium mb-2",children:"Email Address"}),(0,t.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"admin@example.com",required:!0})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-gray-300 text-sm font-medium mb-2",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",value:s,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"••••••••",required:!0})]}),(0,t.jsx)("button",{type:"submit",disabled:m,className:"w-full py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(m?"opacity-70 cursor-not-allowed":""),children:m?"Logging in...":"Login"})]})]})})}},5695:(e,r,s)=>{"use strict";var t=s(8999);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})},7607:(e,r,s)=>{Promise.resolve().then(s.bind(s,5430))},9599:(e,r,s)=>{"use strict";s.d(r,{Mu:()=>n,cb:()=>i});let t={viewer:0,guest:0,user:1,editor:2,moderator:3,admin:4,superadmin:5},a=(e,r)=>(t.hasOwnProperty(e)||(e="guest"),t.hasOwnProperty(r)||(r="guest"),t[e]>=t[r]),n=e=>a(e,"admin"),i=e=>({viewer:"Người xem",guest:"Kh\xe1ch",user:"Người d\xf9ng đ\xe3 đăng k\xfd",editor:"Bi\xean tập vi\xean",moderator:"Quản trị vi\xean nội dung",admin:"Quản trị vi\xean",superadmin:"Quản trị vi\xean cấp cao"})[e]||e}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,9507,7158,883,283,8441,1684,7358],()=>r(7607)),_N_E=e.O()}]);