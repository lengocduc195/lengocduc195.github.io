(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7575],{732:(e,t,s)=>{Promise.resolve().then(s.bind(s,9589))},4126:(e,t,s)=>{"use strict";s.d(t,{AdminProvider:()=>m,P:()=>h,z:()=>o});var a=s(5155),r=s(2115),l=s(5695),c=s(6104),n=s(283),i=s(9599);let d=(0,r.createContext)({isAdmin:!1,adminLoading:!0,adminUser:null}),o=()=>(0,r.useContext)(d),m=e=>{let{children:t}=e,{currentUser:s,loading:o,userRole:m}=(0,n.A)(),[h,x]=(0,r.useState)(!1),[u,g]=(0,r.useState)(!0),[p,j]=(0,r.useState)(null);return(0,l.useRouter)(),(0,r.useEffect)(()=>{(async()=>{if(!o){if(!s){x(!1),j(null),g(!1);return}try{let e=(0,i.Mu)(m);e||(e=await (0,c._x)(s.uid)),x(e),j(e?s:null)}catch(e){console.error("Error checking admin status:",e),x(!1),j(null)}finally{g(!1)}}})()},[s,o,m]),(0,a.jsx)(d.Provider,{value:{isAdmin:h,adminLoading:u,adminUser:p},children:t})},h=e=>function(t){let{isAdmin:s,adminLoading:c}=o(),n=(0,l.useRouter)();return((0,r.useEffect)(()=>{c||s||n.push("/admin/login")},[s,c,n]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Checking admin credentials..."}),(0,a.jsx)("p",{className:"text-gray-400",children:"Please wait while we verify your access."})]})}):s?(0,a.jsx)(e,{...t}):null}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},9589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),r=s(2115),l=s(4126),c=s(6874),n=s.n(c);let i=(0,l.P)(function(){let[e,t]=(0,r.useState)({shopProducts:[],portfolioProducts:[],loading:!0,error:null,searchTerm:"",categoryFilter:"all",selectedProduct:null,isModalOpen:!1,locationData:null,locationLoading:!0});(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/assets/data/shop/product-1.json").then(e=>{if(!e.ok)throw Error("Failed to fetch shop products");return e.json()}).catch(()=>(console.warn("No shop products found or error fetching them"),[])),s=await fetch("/assets/data/products/products_1.json").then(e=>{if(!e.ok)throw Error("Failed to fetch portfolio products");return e.json()}).catch(()=>(console.warn("No portfolio products found or error fetching them"),[]));t(t=>({...t,shopProducts:Array.isArray(e)?e:[e],portfolioProducts:Array.isArray(s)?s:[s],loading:!1}))}catch(e){console.error("Error fetching products:",e),t(t=>({...t,error:e.message||"Failed to load products",loading:!1}))}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/geo");if(!e.ok)throw Error("Failed to fetch location data");let s=await e.json();if(s.success&&s.data)t(e=>({...e,locationData:s.data,locationLoading:!1}));else throw Error(s.error||"Failed to get location data")}catch(e){console.error("Error fetching location data:",e),t(e=>({...e,locationLoading:!1}))}})()},[]);let s=["all",...new Set(e.shopProducts.map(e=>e.category))].filter(Boolean),l=e.shopProducts.filter(t=>{let s=""===e.searchTerm||t.name.toLowerCase().includes(e.searchTerm.toLowerCase())||t.description.toLowerCase().includes(e.searchTerm.toLowerCase()),a="all"===e.categoryFilter||t.category===e.categoryFilter;return s&&a}),c=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),i=e=>{let t=new Date(e);return new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(t)},d=e=>{t(t=>({...t,selectedProduct:e,isModalOpen:!0}))},o=()=>{t(e=>({...e,selectedProduct:null,isModalOpen:!1}))};return e.loading?(0,a.jsxs)("div",{className:"container mx-auto p-6 pt-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Quản l\xfd sản phẩm"}),(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg p-6 shadow-lg",children:(0,a.jsx)("p",{className:"text-center",children:"Đang tải dữ liệu sản phẩm..."})})]}):e.error?(0,a.jsxs)("div",{className:"container mx-auto p-6 pt-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Quản l\xfd sản phẩm"}),(0,a.jsx)("div",{className:"bg-red-900 rounded-lg p-6 shadow-lg",children:(0,a.jsxs)("p",{className:"text-center",children:["Lỗi: ",e.error]})})]}):(0,a.jsxs)("div",{className:"container mx-auto p-6 pt-16",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Quản l\xfd sản phẩm"}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Th\xf4ng tin vị tr\xed người d\xf9ng"}),e.locationLoading?(0,a.jsx)("p",{className:"text-gray-400",children:"Đang tải th\xf4ng tin vị tr\xed..."}):e.locationData?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Địa chỉ IP"}),(0,a.jsx)("p",{className:"text-white",children:e.locationData.ip||"Kh\xf4ng c\xf3 th\xf4ng tin"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Vị tr\xed"}),(0,a.jsx)("p",{className:"text-white",children:[e.locationData.city,e.locationData.region,e.locationData.country].filter(Boolean).join(", ")||"Kh\xf4ng c\xf3 th\xf4ng tin"})]}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Nh\xe0 cung cấp"}),(0,a.jsx)("p",{className:"text-white",children:e.locationData.isp||e.locationData.organization||"Kh\xf4ng c\xf3 th\xf4ng tin"})]}),e.locationData.latitude&&e.locationData.longitude&&(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3 md:col-span-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Tọa độ"}),(0,a.jsxs)("p",{className:"text-white",children:["Vĩ độ: ",e.locationData.latitude,", Kinh độ: ",e.locationData.longitude,(0,a.jsx)("a",{href:"https://www.google.com/maps?q=".concat(e.locationData.latitude,",").concat(e.locationData.longitude),target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-400 hover:text-blue-300",children:"Xem tr\xean bản đồ"})]})]})]}):(0,a.jsx)("p",{className:"text-gray-400",children:"Kh\xf4ng thể lấy th\xf4ng tin vị tr\xed"})]}),(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Danh mục:"}),(0,a.jsx)("select",{value:e.categoryFilter,onChange:e=>t(t=>({...t,categoryFilter:e.target.value})),className:"bg-gray-700 text-white rounded px-3 py-2",children:s.map(e=>(0,a.jsx)("option",{value:e,children:"all"===e?"Tất cả":e},e))})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"T\xecm kiếm:"}),(0,a.jsx)("input",{type:"text",value:e.searchTerm,onChange:e=>t(t=>({...t,searchTerm:e.target.value})),placeholder:"T\xecm theo t\xean sản phẩm, m\xf4 tả...",className:"w-full bg-gray-700 text-white rounded px-3 py-2"})]})]})}),(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-900",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"T\xean sản phẩm"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Danh mục"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Gi\xe1"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Trạng th\xe1i"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Ng\xe0y tạo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Thao t\xe1c"})]})}),(0,a.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:l.length>0?l.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.category}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c(e.price)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.inStock?"bg-green-500":"bg-red-500"),children:e.inStock?"C\xf2n h\xe0ng":"Hết h\xe0ng"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i(e.date)}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[(0,a.jsx)("button",{onClick:()=>d(e),className:"text-blue-500 hover:text-blue-400 mr-3",children:"Chi tiết"}),(0,a.jsx)(n(),{href:"/shop/".concat(e.slug),target:"_blank",className:"text-green-500 hover:text-green-400",children:"Xem"})]})]},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-sm",children:"Kh\xf4ng t\xecm thấy sản phẩm n\xe0o"})})})]})})}),e.isModalOpen&&e.selectedProduct&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold",children:["Chi tiết sản phẩm: ",e.selectedProduct.name]}),(0,a.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Th\xf4ng tin cơ bản"}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"ID:"})," ",e.selectedProduct.id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"T\xean:"})," ",e.selectedProduct.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Slug:"})," ",e.selectedProduct.slug]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Danh mục:"})," ",e.selectedProduct.category]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Gi\xe1:"})," ",c(e.selectedProduct.price)]}),e.selectedProduct.salePrice&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Gi\xe1 khuyến m\xe3i:"})," ",c(e.selectedProduct.salePrice)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Trạng th\xe1i:"})," ",e.selectedProduct.inStock?"C\xf2n h\xe0ng":"Hết h\xe0ng"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Đ\xe1nh gi\xe1:"})," ",e.selectedProduct.rating,"/5 (",e.selectedProduct.reviews," đ\xe1nh gi\xe1)"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Ng\xe0y tạo:"})," ",i(e.selectedProduct.date)]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"M\xf4 tả"}),(0,a.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,a.jsx)("p",{children:e.selectedProduct.description}),e.selectedProduct.longDescription&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"M\xf4 tả chi tiết:"}),(0,a.jsx)("p",{children:e.selectedProduct.longDescription})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"H\xecnh ảnh"}),(0,a.jsx)("div",{className:"bg-gray-700 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden",children:(0,a.jsx)("img",{src:e.selectedProduct.image,alt:e.selectedProduct.name,className:"w-full h-full object-cover"})}),e.selectedProduct.gallery&&e.selectedProduct.gallery.map((t,s)=>(0,a.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden",children:(0,a.jsx)("img",{src:t,alt:"".concat(e.selectedProduct.name," - ").concat(s+1),className:"w-full h-full object-cover"})},s))]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-md",children:"Đ\xf3ng"}),(0,a.jsx)(n(),{href:"/shop/".concat(e.selectedProduct.slug),target:"_blank",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md",children:"Xem tr\xean trang web"})]})]})})})]})})},9599:(e,t,s)=>{"use strict";s.d(t,{Mu:()=>l,cb:()=>c});let a={viewer:0,guest:0,user:1,editor:2,moderator:3,admin:4,superadmin:5},r=(e,t)=>(a.hasOwnProperty(e)||(e="guest"),a.hasOwnProperty(t)||(t="guest"),a[e]>=a[t]),l=e=>r(e,"admin"),c=e=>({viewer:"Người xem",guest:"Kh\xe1ch",user:"Người d\xf9ng đ\xe3 đăng k\xfd",editor:"Bi\xean tập vi\xean",moderator:"Quản trị vi\xean nội dung",admin:"Quản trị vi\xean",superadmin:"Quản trị vi\xean cấp cao"})[e]||e}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,9507,7158,6874,883,283,8441,1684,7358],()=>t(732)),_N_E=e.O()}]);